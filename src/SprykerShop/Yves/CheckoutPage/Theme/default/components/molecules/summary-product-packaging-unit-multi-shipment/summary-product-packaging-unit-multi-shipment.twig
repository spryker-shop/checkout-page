{% extends model('component') %}

{% define config = {
    name: 'summary-product-packaging-unit-multi-shipment',
} %}

{% define data = {
    name: required,
    quantity: required,
    amount: required,
    price: required,
    quantitySalesUnit: required,
    amountSalesUnit: required,
    images: [],
} %}

{% block body %}
    <div class="col col--sm-12 col--lg-3">
        {% include molecule('summary-image', 'CheckoutPage') with {
            data: {
                name: data.name | default(''),
                image: data.images ? (data.images | first) : null,
            },
        } only %}
    </div>
    <div class="col col--sm-12 col--lg-9">
        {% set salesUnitName = data.quantitySalesUnit.productMeasurementUnit.name | default('') %}
        {% set salesUnitSummary = '' %}
        {% if salesUnitName %}
            {% set salesUnitSummary = data.quantity / data.quantitySalesUnit.conversion ~ ' ' ~ salesUnitName | trans %}
        {% endif %}
        {% set amountPerQuantity = data.amount / data.quantity %}

        {% if can('SeePricePermissionPlugin') %}
            <strong class="float-right">{{ data.price }}</strong>
        {% else %}
            <strong class="float-right">{{ 'customer.access.cannot_see_price' | trans }}</strong>
        {% endif %}

        <span>
            {{data.quantity}} <span class="text-secondary">&times;</span> {{data.name}} {% if salesUnitSummary is not empty %}(={{ salesUnitSummary }}){% endif %}
        </span>
        <br>

        <span>
            {{ 'packaging_units.cart.quantity' | trans }}: {{data.quantity}}
        </span>
        <br>

        {% if data.amountSalesUnit is defined and data.amountSalesUnit is not empty %}
            {% set amountSalesUnitName = data.amountSalesUnit.productMeasurementUnit.name | default('') %}
            <span>
                <span class="text-secondary">&times;</span> {{ amountPerQuantity }} {{ 'packaging_units.cart.item' | trans }} (= {{ amountPerQuantity / data.amountSalesUnit.conversion }}{{ amountSalesUnitName | trans }}) = {{ data.amount }} {{ 'packaging_units.cart.item' | trans }}
            </span>
        {% endif %}
    </div>
{% endblock %}
