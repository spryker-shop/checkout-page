{% extends model('component') %}

{% define config = {
    name: 'summary-node',
} %}

{% define data = {
    node: required,
    options: data.node.productOptions | default([]),
    bundleItems: data.node.bundleItems | default([]),
} %}

{% block body %}
    {% block packagingUnit %}
        {% include [
            molecule('summary-product-packaging-unit-node', 'ProductPackagingUnitWidget'),
            molecule('summary-product-packaging-unit-node-by-default', 'ProductPackagingUnitWidget')
        ] ignore missing with {
            data: {
                node: data.node,
            },
        } only %}
    {% endblock %}

    {% block bundleItems %}
        {% if data.bundleItems is not empty %}
            <ul>
                <li>{{ 'checkout.summary.item.bundle.description' | trans }}</li>

                {% for item in data.bundleItems %}
                    <li>
                        {{ 'summary_node_bundle_items_summary' | trans({
                                '%quantity%': item.quantity,
                                '%name%': item.name,
                        })}}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endblock %}

    {% block options %}
        {% if data.options is not empty %}
            <ul>
                <li>{{ 'checkout.summary.item.option.description' | trans }}</small></li>

                {% for option in data.options %}
                    <li>
                        {{ 'summary_node_option_value' | trans({
                            '%value%': option.value | trans,
                        })}}
                        <strong>{{ option.sumPrice | default(0) | money }}</strong>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endblock %}
{% endblock %}
