{% extends model('component') %}

{% define config = {
    name: 'summary-node',
} %}

{% define data = {
    node: required,
    options: data.node.productOptions | default([]),
    bundleItems: data.node.bundleItems | default([]),
} %}

{% block body %}
    {% if widgetExists('SummaryProductPackagingUnitWidgetPlugin') %}
        {{ widget('SummaryProductPackagingUnitWidgetPlugin', data) }} {# @deprecated Use molecule('summary-product-packaging-unit-node', 'ProductPackagingUnitWidget') instead. #}
    {% else %}
        {% include [
            molecule('summary-product-packaging-unit-node', 'ProductPackagingUnitWidget'),
            molecule('summary-product-packaging-unit-node-by-default', 'ProductPackagingUnitWidget')
        ] ignore missing with {
            data: {
                node: data.node,
            },
        } only %}
    {% endif %}

    {% if data.bundleItems is not empty %}
        <ul>
            <li>{{ 'checkout.summary.item.bundle.description' | trans }}</li>
            {% for item in data.bundleItems %}
                <li> - {{ item.quantity }} x {{ item.name }}  </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if data.options is not empty %}
        <ul>
            <li>{{ 'checkout.summary.item.option.description' | trans }}</small></li>
            {% for option in data.options %}
                <li> + {{ option.value | trans }} <strong>{{ option.sumPrice | default(0) | money }}</strong></li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
