{% extends model('component') %}

{% define config = {
    name: 'summary-item',
    tag: 'div'
} %}

{% define data = {
    name: required,
    quantity: required,
    price: 0,
    options: [],
    bundleItems: [],
    quantitySalesUnit: null,
    amountSaleUnit: null,
    amount: 0
} %}

{% block body %}
    {% widget 'SummaryProductPackagingUnitWidget' args [data] only %}
    {% elsewidget 'SummaryProductPackagingUnitWidgetPlugin' args [data] only %} {# @deprecated Use SummaryProductPackagingUnitWidget instead. #}
    {% nowidget %}
        {% set salesUnitName = data.quantitySalesUnit.productMeasurementUnit.name | default('') %}
        {% set salesUnitSummary = '' %}
        {% if salesUnitName %}
            {% set salesUnitSummary = data.quantitySalesUnit.value / data.quantitySalesUnit.precision ~ ' ' ~ salesUnitName | trans %}
        {% endif %}

        <strong class="float-right">{{data.price}}</strong>
        {{data.quantity}} <span class="text-secondary">&times;</span> {{data.name}} {% if salesUnitSummary is not empty %}(= {{ salesUnitSummary }}){% endif %}
    {% endwidget %}

    {% if data.bundleItems is not empty %}
        <ul>
            <li>{{ 'checkout.summary.item.bundle.description' | trans }}</li>
            {% for item in data.bundleItems %}
                <li> - {{ item.quantity }} x {{ item.name }}  </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if data.options is not empty %}
        <ul>
            <li>{{ 'checkout.summary.item.option.description' | trans }}</small></li>
            {% for option in data.options %}
                <li> + {{ option.value | trans }} <strong>{{ option.sumPrice | default(0) | money }}</strong></li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
